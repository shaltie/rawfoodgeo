function TremulaItem(t){this.data=t,this.imgUrl=t.imgUrl,this.w=this.width=t.w,this.h=this.height=t.h,this.isLastContentBlock=t.isLastContentBlock||!1,this.layoutType=t.layoutType||"tremulaInline",this.noScaling=t.noScaling||!1,this.isFavorite=t.isFavorite||!1,this.auxClassList=t.auxClassList||"",this.template=this.data.template||'<img class="moneyShot" onload="imageLoaded(this)" src=""/>'}function flickrSearch(t,i){this.data=t,this.isLastContentBlock=t.isLastContentBlock||!1,this.layoutType=t.layoutType||"tremulaInline",this.noScaling=t.noScaling||!1,this.isFavorite=t.isFavorite||!1,this.auxClassList=t.auxClassList||"";i.options.itemConstraint;t.url_z?(this.src=t.url_z,this.w=this.width=t.width_z,this.h=this.height=t.height_z,this.imgUrl=this.src,this.auxClassList="flickrRS "+this.auxClassList):(this.w=this.width=this.data.w||100,this.h=this.height=this.data.h||100,this.imgUrl=""),this.itemTitle=t.title||"",this.template=this.data.template||'<img draggable="false" class="moneyShot" onload="imageLoaded(this)" src=""/>'}function flickrTest(t,i){this.data=t,this.isLastContentBlock=t.isLastContentBlock||!1,this.layoutType=t.layoutType||"tremulaInline",this.noScaling=t.noScaling||!1,this.isFavorite=t.isFavorite||!1,this.auxClassList=t.auxClassList||"";i.options.itemConstraint;t.url_z?(this.src=t.url_z,this.w=this.width=t.width_z,this.h=this.height=t.height_z,this.imgUrl=this.src,this.auxClassList="flickrRS "+this.auxClassList):(this.w=this.width=this.data.w||100,this.h=this.height=this.data.h||100,this.imgUrl=""),this.itemTitle=t.title||""}function attachDemoControls(i){function s(t){var i=t.Grid,s=i.si,e=i.saDim,n=i.gridDims[s],r=i.getBoxFromIndex(0)&&i.getBoxFromIndex(0)[e]||0,a=.5*n-.5*r-.5*i.itemMargins[s];i.updateConfig({scrollAxisOffset:a},!0),t.resize()}function e(t){var i=.9,s=t.Grid,e=s.saDim_,n=s.si_,r=s.staticAxisCount,a=2*s.itemMargins[n],o=i*(t.$e[e]()-a*(r+1)),h=s.itemConstraint,l=Math.max(0,Math.floor(o/h)-1);l!=r&&s.updateConfig({axes:l},!0)}function n(t){var i=.9,s=t.Grid,e=s.saDim_,n=s.si_,r=s.staticAxisCount,a=2*s.itemMargins[n],o=(t.$e[e]()-a)*(1/(r+1)),h=s.itemConstraint,l=Math.max(.1,o/h),c=i*h*l-a;c!=h&&s.updateConfig({itemConstraint:c},!0)}function r(){i.Grid.scrollAxisOffset=0,resizeFn=function(){}}function a(){}function o(t,s){var e="https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=c149b994c54c114bd7836b61539eec2e&tags=street+art&format=json&page=1&extras=url_z";$.ajax({url:e,dataType:"jsonp",jsonp:"jsoncallback"}).done(function(t){console.log(t);var e=t.photos.photo.filter(function(t){return t.height_z>.5*t.width_z});refreshData&&i.refreshData(e,flickrSearch),s?s():i.appendData(e,flickrSearch),s&&s()}).fail(function(t,i,s){console.log("API FAIL. "+s)})}function h(){console.log("postLoadSeq",!!i.steppedScrolling),i.Grid.steppedScrolling&&setTimeout(function(){i.Grid.easeToClosestStepItem()},100)}var l=i.Grid;return $(".streamHorizontal").click(function(){l.toggleScrollAxis("x"),setTimeout(function(){var t=.5*i.$e.height();l.doTransition(i.layouts.basicGridLayout,{steppedScrolling:!1,axes:0,itemConstraint:t,itemMargins:[25,25],staticAxisOffset:0},800,i.easings.easeOutElastic,i.projections.streamHorizontal),resizeFn(i)},100)}),$(".pinterest").click(function(){l.toggleScrollAxis("y"),setTimeout(function(){$body.removeClass("doReflect"),l.doTransition(i.layouts.basicGridLayout,{steppedScrolling:!1,axes:3,itemConstraint:250,itemMargins:[25,25],staticAxisOffset:0},800,i.easings.easeOutElastic,i.projections.pinterest),(resizeFn=e)(i)},100)}),$(".btnL2").click(function(){l.toggleScrollAxis("x"),setTimeout(function(){$body.addClass("doReflect");var t=.5*i.$e.height();l.doTransition(i.layouts.basicGridLayout,{steppedScrolling:!1,axes:0,itemConstraint:t,staticAxisOffset:0},800,i.easings.easeOutElastic,i.projections.turntable),l.setItemEasing(!1),resizeFn(i)},100)}),$(".btnL3").click(function(){l.toggleScrollAxis("x"),setTimeout(function(){l.doTransition(i.layouts.basicGridLayout,{steppedScrolling:!1,axes:0,itemConstraint:300,itemMargins:[30,30],staticAxisOffset:0},800,i.easings.easeOutElastic,i.projections.enterTheDragon),l.setItemEasing(!1),resizeFn(i)},100)}),$(".btnL4").click(function(){l.toggleScrollAxis("x"),setTimeout(function(){l.doTransition(i.layouts.basicGridLayout,{steppedScrolling:!1,axes:0,itemConstraint:100,staticAxisOffset:0},800,i.easings.easeOutElastic,i.projections.sunrise),l.setItemEasing(!1),resizeFn(i)},100)}),$(".mountain").click(function(){l.toggleScrollAxis("x"),setTimeout(function(){$body.addClass("doReflect");var t=.4*i.$e.height();l.doTransition(i.layouts.basicGridLayout,{steppedScrolling:!1,axes:0,itemConstraint:t,itemMargins:[10,10],staticAxisOffset:0},800,i.easings.easeOutElastic,i.projections.mountain),l.setItemEasing(!1),r(),refreshData=!1,resizeFn(i)},100)}),$(".btnL5").click(function(){l.toggleScrollAxis("x"),setTimeout(function(){$body.removeClass("doReflect"),l.doTransition(i.layouts.basicGridLayout,{steppedScrolling:!1,axes:0,itemConstraint:200,itemMargins:[5,5],staticAxisOffset:0},800,i.easings.easeOutElastic,i.projections.bezierShape),l.setItemEasing(!1),resizeFn(i)},100)}),$(".xy").click(function(){function t(){var t="x"==l.sa?"y":"x";l.toggleScrollAxis(t),$body.removeClass("doReflect"),l.updateConfig({steppedScrolling:!1,axes:1,itemConstraint:200,itemMargins:[20,20],staticAxisOffset:20,surfaceMap:i.projections.xyPlain}),l.setItemEasing(!1),resizeFn(i)}t(),t(),t()}),$(".btn1").click(function(){l.jumpToScrollProgress(0),setTimeout(function(){l.doTransition(i.layouts.basicGridLayout,{steppedScrolling:!1,axes:0,staticAxisOffset:0},800,i.easings.easeOutElastic),l.setItemEasing(!1),r()},100)}),$(".btn2").click(function(){l.jumpToScrollProgress(0),setTimeout(function(){l.doTransition(i.layouts.basicGridLayout,{steppedScrolling:!1,axes:1,staticAxisOffset:0},800,i.easings.easeOutElastic),l.setItemEasing(!1),r()},100)}),$(".btn3").click(function(){l.jumpToScrollProgress(0),setTimeout(function(){l.doTransition(i.layouts.basicGridLayout,{steppedScrolling:!1,axes:2,staticAxisOffset:0},800,i.easings.easeOutElastic),l.setItemEasing(!1),r()},100)}),$(".size1").click(function(){setTimeout(function(){l.updateConfig({itemConstraint:100},!0),r()},100)}),$(".size2").click(function(){setTimeout(function(){l.updateConfig({itemConstraint:200},!0),r()},100)}),$(".size3").click(function(){setTimeout(function(){l.updateConfig({itemConstraint:300},!0),r()},100)}),$(".margin1").click(function(){setTimeout(function(){l.updateConfig({itemMargins:[10,10]},!0),resizeFn(i)},100)}),$(".margin2").click(function(){setTimeout(function(){l.updateConfig({itemMargins:[20,20]},!0),resizeFn(i)},100)}),$(".margin3").click(function(){setTimeout(function(){l.updateConfig({itemMargins:[30,30]},!0),resizeFn(i)},100)}),$body=$("body"),$body.on("click tremulaItemSelect",function(){$body.removeClass("showControls")}),$(".tab").on("click",function(t){t.stopPropagation(),$body.toggleClass("showControls")}),$(".more").on("click",function(t){t.stopPropagation(),$(".streamHorizontal").click(),$body.addClass("showTweaks"),$(".more").remove()}),$(".controls").on("click",function(t){t.stopPropagation(),($(t.target).hasClass("buttons")||$(t.target).hasClass("controls"))&&$body.removeClass("showControls")}),$(".showCtrlData").on("click",function(){toggleDebug()}),$(".toggleReflect").click(function(){$body.toggleClass("doReflect")}),$(".toggleItemEase").click(function(){l.setItemEasing(!l.itemEasing)}),$(".toggleScrollAxis").click(function(){l.toggleScrollAxis()}),$(".toggleIsLooping").click(function(){l.toggleIsLooping()}),refreshData=!1,$(".toggleRefreshData").text("appending"),$(".toggleRefreshData").click(function(){refreshData=!refreshData;var t;t=refreshData?"replacing":"appending",$(".toggleRefreshData").text(t)}),$(".tailScroll").click(function(){l.setLastTouchOrigin(l.gridDims[l.si]/2),l.easeTo(l.getScrollPos()-.5*l.getScrollViewDim(),800)}),$(".headScroll").click(function(){l.setLastTouchOrigin(l.gridDims[l.si]/2),l.easeTo(l.getScrollPos()+.5*l.getScrollViewDim(),800)}),$(".tremulaContainer").on("tremulaItemSelect",function(i,s){var e=$(s.target);if(t=e.closest(".gridBox")[0])var n=$.data(t).model,r=n.model.data;if(console.log(n||"no target object selected"),r&&l.steppedScrolling){var a=l.getClosestScrollOriginObj();n===a?alert("DO STUFF!"):l.easeToThisStepItem(n)}}),resizeFn=function(){},$(".autoSize").click(function(){(resizeFn=n)(i)}),$(".autoCount").click(function(){(resizeFn=e)(i)}),$(".autoDisable").click(r),$(window).on("resize",$.debounce(250,function(){resizeFn(i)})),$(".loadArtDotCom").click(function(){a(null,h)}),$(".loadFlickr").click(function(){o(null,h)}),window.loadHorizontalStepped=function(){i.Grid.removeAll(),i.Grid.updateConfig({steppedScrolling:!0,axes:0,itemConstraint:200,itemMargins:[20,20],easeToCompensation:0,surfaceMap:horizontalStepped}),window.resizeFn=s,window.resizeFn(i),a(null,h)},window.loadHorizontalPop=function(){i.Grid.removeAll(),i.Grid.updateConfig({steppedScrolling:!0,axes:0,itemConstraint:200,itemMargins:[20,20],easeToCompensation:0,surfaceMap:horizontalPop}),window.resizeFn=s,window.resizeFn(i),a(null,h)},window.loadMountainPop=function(){i.Grid.removeAll(),i.Grid.updateConfig({steppedScrolling:!0,axes:0,itemConstraint:150,itemMargins:[20,20],easeToCompensation:-15,surfaceMap:mountainPop}),window.resizeFn=s,window.resizeFn(i),a(null,h)},window.loadCarouselWithPop=function(){i.Grid.removeAll(),i.Grid.updateConfig({steppedScrolling:!0,axes:0,itemConstraint:200,itemMargins:[50,0],easeToCompensation:15,surfaceMap:carouselWithPop}),window.resizeFn=s,window.resizeFn(i),a(null,h)},window.loadTwelveToSix=function(){i.Grid.removeAll(),i.Grid.toggleScrollAxis("y"),i.Grid.updateConfig({steppedScrolling:!1,axes:0,itemConstraint:100,itemMargins:[10,10],easeToCompensation:50,surfaceMap:twelveToSix}),window.resizeFn=s,window.resizeFn(i),a(null,h)},a(null,h),this}function horizontalStepped(t,i){var s,e,n=userPath,r=this.parent.gridDims[0],a=this.parent.gridDims[1],o=this.parent.currentGridContentDims,h=this.waves.tailRamp,l=(this.waves.headRamp,this.waves.triangle),c=[r,a],u=jsBezier.factorCurveBy(n,c),g=jsBezier.pointOnCurve(u,h),s=(jsBezier.gradientAtPoint(u,h),t+16),e=.5*a-0*g.y-.5*this.dims[1]-(.5*(o[1]-this.dims[1])-0*i-this.itemMargins[1]),m=0;this.e.style.transformOrigin=this.e.style.webkitTransformOrigin=this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+s+"px,"+e+"px, "+m+"px)";1e4-this.index;this.e.style.zIndex=Math.abs(Math.floor(100*l)),this.e.style.opacity=1,this.e.style.webkitBoxShadow="0 0 10px rgba(0,0,0,"+Math.min(l,.3)+")",this.pPos=[t,i]}function horizontalPop(t,i){var s,e,n=userPath,r=this.parent.gridDims[0],a=this.parent.gridDims[1],o=this.parent.currentGridContentDims,h=this.waves.tailRamp,l=(this.waves.headRamp,this.waves.triangle);l=Math.min(.9,l);var c=[r,a],u=jsBezier.factorCurveBy(n,c),g=jsBezier.pointOnCurve(u,h),s=(jsBezier.gradientAtPoint(u,h),t+16),e=.5*a-0*g.y-.5*this.dims[1]-(.5*(o[1]-this.dims[1])-0*i-this.itemMargins[1]),m=100*l*10*l*.5;this.e.style.transformOrigin=this.e.style.webkitTransformOrigin=this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+s+"px,"+e+"px, "+m+"px)";1e4-this.index;this.e.style.zIndex=Math.abs(Math.floor(100*l)),this.e.style.opacity=1,this.e.style.webkitBoxShadow="0 0 10px rgba(0,0,0,"+Math.min(l,.3)+")",this.pPos=[t,i]}function carouselWithPop(t,i){var s,e,n=softKnee,r=this.parent.gridDims[0],a=this.parent.gridDims[1],o=this.parent.currentGridContentDims,h=this.waves.tailRamp,l=this.waves.headRamp,c=this.waves.triangle,u=[r,a],g=jsBezier.factorCurveBy(n,u),m=jsBezier.pointOnCurve(g,l),s=(jsBezier.gradientAtPoint(g,l),r-.5*this.outerDims[0]-m.x+10),e=m.y-.5*this.dims[1]+i-.5*(o[1]-this.dims[1])-this.itemMargins[1],p=Math.min(-200,-2e3*(1-c))+500;this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+s+"px,"+e+"px, "+p+"px) rotateY("+(180*h-96)+"deg)",this.e.style.opacity=Math.min(1,2*c-.5);1e4-this.index;this.e.style.zIndex=Math.abs(Math.floor(100*c)),this.e.style.webkitBoxShadow="0 0 20px -3px rgba(0,0,0,"+Math.min(c,.6)+")",this.pPos=[t,i]}function thumbRollerDial(t,i){var s,e,n=thumbRollerDialPath,r=(this.parent.staticAxisCount+1,this.parent.gridDims[0]),a=this.parent.gridDims[1],o=this.parent.currentGridContentDims,h=(this.waves.tailRamp,this.waves.headRamp),l=(this.waves.triangle,[r,a]),c=jsBezier.factorCurveBy(n,l),u=jsBezier.pointOnCurve(c,h),g=r-u.x-.5*this.dims[0]-(.5*(o[0]-this.dims[0])-t-this.itemMargins[0]),e=a-.5*this.outerDims[1]-u.y,s=.5*r-.5*this.dims[0];this.e.style.webkitTransformOrigin=this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+s+"px,"+e+"px, "+g+"px)";var m=1e6-this.index;this.e.style.zIndex=m,this.e.style.opacity=1,this.pPos=[t,i]}function twelveToSix(t,i){var s,e,n=twelveToSixPath,r=(this.parent.staticAxisCount+1,this.parent.gridDims[0]),a=this.parent.gridDims[1],o=this.parent.currentGridContentDims,h=this.waves.tailRamp,l=this.waves.headRamp,c=(this.waves.triangle,[r,a]),u=jsBezier.factorCurveBy(n,c),g=jsBezier.pointOnCurve(u,l),m=90*h-45,s=r-g.x-.5*this.dims[0]-(.5*(o[0]-this.dims[0])-t-this.itemMargins[0]),e=a-.5*this.outerDims[1]-g.y,p=0;this.e.style.webkitTransformOrigin=this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+s+"px,"+e+"px, "+p+"px) rotateZ("+m+"deg)";var d=1e6-this.index;this.e.style.zIndex=d,this.e.style.opacity=1,this.pPos=[t,i]}function sixToTwelve(t,i){var s,e,n=sixToTwelvePath,r=(this.parent.staticAxisCount+1,this.parent.gridDims[0]),a=this.parent.gridDims[1],o=this.parent.currentGridContentDims,h=(this.waves.tailRamp,this.waves.headRamp),l=(this.waves.triangle,[r,a]),c=jsBezier.factorCurveBy(n,l),u=jsBezier.pointOnCurve(c,h),g=90*h-45,s=r-u.x-.5*this.dims[0]-(.5*(o[0]-this.dims[0])-t-this.itemMargins[0]),e=a-.5*this.outerDims[1]-u.y,m=0;this.e.style.webkitTransformOrigin=this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+s+"px,"+e+"px, "+m+"px) rotateZ("+g+"deg)";var p=1e6-this.index;this.e.style.zIndex=p,this.e.style.opacity=1,this.pPos=[t,i]}function mountainPop(t,i){var s,e,n=[{x:0,y:.9},{x:.33,y:.4},{x:.66,y:.4},{x:1,y:.9}],r=this.parent.gridDims[0],a=this.parent.gridDims[1],o=this.parent.currentGridContentDims,h=(this.waves.tailRamp,this.waves.headRamp),l=this.waves.triangle,c=[r,a],u=n,g=jsBezier.factorCurveBy(u,c),m=jsBezier.pointOnCurve(g,h),p=jsBezier.gradientAtPoint(g,h),s=r-.5*this.outerDims[0]-m.x+30,e=m.y-.5*this.dims[1]+i-.5*(o[1]-this.dims[1])-this.itemMargins[1],d=100*l*10*l*.5;this.e.style.transformOrigin=this.e.style.webkitTransformOrigin=this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+s+"px,"+e+"px, "+d+"px) rotateZ("+(60*-p+1)+"deg)",this.e.style.opacity=1;1e4-this.index;this.e.style.zIndex=Math.abs(Math.floor(100*l)),this.e.style.webkitBoxShadow="0 0 20px rgba(0,0,0,"+Math.min(l,.5)+")",this.pPos=[t,i]}!function(t,i){"use strict";function s(){if(!e.READY){e.event.determineEventTypes();for(var t in e.gestures)e.gestures.hasOwnProperty(t)&&e.detection.register(e.gestures[t]);e.event.onTouch(e.DOCUMENT,e.EVENT_MOVE,e.detection.detect),e.event.onTouch(e.DOCUMENT,e.EVENT_END,e.detection.detect),e.READY=!0}}var e=function(t,i){return new e.Instance(t,i||{})};e.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},e.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,e.HAS_TOUCHEVENTS="ontouchstart"in t,e.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,e.NO_MOUSEEVENTS=e.HAS_TOUCHEVENTS&&navigator.userAgent.match(e.MOBILE_REGEX),e.EVENT_TYPES={},e.DIRECTION_DOWN="down",e.DIRECTION_LEFT="left",e.DIRECTION_UP="up",e.DIRECTION_RIGHT="right",e.POINTER_MOUSE="mouse",e.POINTER_TOUCH="touch",e.POINTER_PEN="pen",e.EVENT_START="start",e.EVENT_MOVE="move",e.EVENT_END="end",e.DOCUMENT=document,e.plugins={},e.READY=!1,e.Instance=function(t,i){var n=this;return s(),this.element=t,this.enabled=!0,this.options=e.utils.extend(e.utils.extend({},e.defaults),i||{}),this.options.stop_browser_behavior&&e.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),e.event.onTouch(t,e.EVENT_START,function(t){n.enabled&&e.detection.startDetect(n,t)}),this},e.Instance.prototype={on:function(t,i){for(var s=t.split(" "),e=0;e<s.length;e++)this.element.addEventListener(s[e],i,!1);return this},off:function(t,i){for(var s=t.split(" "),e=0;e<s.length;e++)this.element.removeEventListener(s[e],i,!1);return this},trigger:function(t,i){var s=e.DOCUMENT.createEvent("Event");s.initEvent(t,!0,!0),s.gesture=i;var n=this.element;return e.utils.hasParent(i.target,n)&&(n=i.target),n.dispatchEvent(s),this},enable:function(t){return this.enabled=t,this}};var n=null,r=!1,a=!1;e.event={bindDom:function(t,i,s){for(var e=i.split(" "),n=0;n<e.length;n++)t.addEventListener(e[n],s,!1)},onTouch:function(t,i,s){var o=this;this.bindDom(t,e.EVENT_TYPES[i],function(h){var l=h.type.toLowerCase();if(!l.match(/mouse/)||!a){l.match(/touch/)||l.match(/pointerdown/)||l.match(/mouse/)&&1===h.which?r=!0:l.match(/mouse/)&&1!==h.which&&(r=!1),l.match(/touch|pointer/)&&(a=!0);var c=0;r&&(e.HAS_POINTEREVENTS&&i!=e.EVENT_END?c=e.PointerEvent.updatePointer(i,h):l.match(/touch/)?c=h.touches.length:a||(c=l.match(/up/)?0:1),c>0&&i==e.EVENT_END?i=e.EVENT_MOVE:c||(i=e.EVENT_END),c||null===n?n=h:h=n,s.call(e.detection,o.collectEventData(t,i,h)),e.HAS_POINTEREVENTS&&i==e.EVENT_END&&(c=e.PointerEvent.updatePointer(i,h))),c||(n=null,r=!1,a=!1,e.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=e.HAS_POINTEREVENTS?e.PointerEvent.getEvents():e.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],e.EVENT_TYPES[e.EVENT_START]=t[0],e.EVENT_TYPES[e.EVENT_MOVE]=t[1],e.EVENT_TYPES[e.EVENT_END]=t[2]},getTouchList:function(t){return e.HAS_POINTEREVENTS?e.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,i,s){var n=this.getTouchList(s,i),r=e.POINTER_TOUCH;return(s.type.match(/mouse/)||e.PointerEvent.matchType(e.POINTER_MOUSE,s))&&(r=e.POINTER_MOUSE),{center:e.utils.getCenter(n),timeStamp:(new Date).getTime(),target:s.target,touches:n,eventType:i,pointerType:r,srcEvent:s,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return e.detection.stopDetect()}}}},e.PointerEvent={pointers:{},getTouchList:function(){var t=this,i=[];return Object.keys(t.pointers).sort().forEach(function(s){i.push(t.pointers[s])}),i},updatePointer:function(t,i){return t==e.EVENT_END?this.pointers={}:(i.identifier=i.pointerId,this.pointers[i.pointerId]=i),Object.keys(this.pointers).length},matchType:function(t,i){if(!i.pointerType)return!1;var s={};return s[e.POINTER_MOUSE]=i.pointerType==i.MSPOINTER_TYPE_MOUSE||i.pointerType==e.POINTER_MOUSE,s[e.POINTER_TOUCH]=i.pointerType==i.MSPOINTER_TYPE_TOUCH||i.pointerType==e.POINTER_TOUCH,s[e.POINTER_PEN]=i.pointerType==i.MSPOINTER_TYPE_PEN||i.pointerType==e.POINTER_PEN,s[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},e.utils={extend:function(t,s,e){for(var n in s)t[n]!==i&&e||(t[n]=s[n]);return t},hasParent:function(t,i){for(;t;){if(t==i)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var i=[],s=[],e=0,n=t.length;n>e;e++)i.push(t[e].pageX),s.push(t[e].pageY);return{pageX:(Math.min.apply(Math,i)+Math.max.apply(Math,i))/2,pageY:(Math.min.apply(Math,s)+Math.max.apply(Math,s))/2}},getVelocity:function(t,i,s){return{x:Math.abs(i/t)||0,y:Math.abs(s/t)||0}},getAngle:function(t,i){var s=i.pageY-t.pageY,e=i.pageX-t.pageX;return 180*Math.atan2(s,e)/Math.PI},getDirection:function(t,i){var s=Math.abs(t.pageX-i.pageX),n=Math.abs(t.pageY-i.pageY);return s>=n?t.pageX-i.pageX>0?e.DIRECTION_LEFT:e.DIRECTION_RIGHT:t.pageY-i.pageY>0?e.DIRECTION_UP:e.DIRECTION_DOWN},getDistance:function(t,i){var s=i.pageX-t.pageX,e=i.pageY-t.pageY;return Math.sqrt(s*s+e*e)},getScale:function(t,i){return t.length>=2&&i.length>=2?this.getDistance(i[0],i[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,i){return t.length>=2&&i.length>=2?this.getAngle(i[1],i[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==e.DIRECTION_UP||t==e.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,i){var s,e=["webkit","khtml","moz","ms","o",""];if(i&&t.style){for(var n=0;n<e.length;n++)for(var r in i)i.hasOwnProperty(r)&&(s=r,e[n]&&(s=e[n]+s.substring(0,1).toUpperCase()+s.substring(1)),t.style[s]=i[r]);"none"==i.userSelect&&(t.onselectstart=function(){return!1})}}},e.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,i){this.current||(this.stopped=!1,this.current={inst:t,startEvent:e.utils.extend({},i),lastEvent:!1,name:""},this.detect(i))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var i=this.current.inst.options,s=0,n=this.gestures.length;n>s;s++){var r=this.gestures[s];if(!this.stopped&&i[r.name]!==!1&&r.handler.call(r,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==e.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=e.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var i=this.current.startEvent;if(i&&(t.touches.length!=i.touches.length||t.touches===i.touches)){i.touches=[];for(var s=0,n=t.touches.length;n>s;s++)i.touches.push(e.utils.extend({},t.touches[s]))}var r=t.timeStamp-i.timeStamp,a=t.center.pageX-i.center.pageX,o=t.center.pageY-i.center.pageY,h=e.utils.getVelocity(r,a,o);return e.utils.extend(t,{deltaTime:r,deltaX:a,deltaY:o,velocityX:h.x,velocityY:h.y,distance:e.utils.getDistance(i.center,t.center),angle:e.utils.getAngle(i.center,t.center),direction:e.utils.getDirection(i.center,t.center),scale:e.utils.getScale(i.touches,t.touches),rotation:e.utils.getRotation(i.touches,t.touches),startEvent:i}),t},register:function(t){var s=t.defaults||{};return s[t.name]===i&&(s[t.name]=!0),e.utils.extend(e.defaults,s,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,i){return t.index<i.index?-1:t.index>i.index?1:0}),this.gestures}},e.gestures=e.gestures||{},e.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,i){switch(t.eventType){case e.EVENT_START:clearTimeout(this.timer),e.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==e.detection.current.name&&i.trigger("hold",t)},i.options.hold_timeout);break;case e.EVENT_MOVE:t.distance>i.options.hold_threshold&&clearTimeout(this.timer);break;case e.EVENT_END:clearTimeout(this.timer)}}},e.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,i){if(t.eventType==e.EVENT_END){var s=e.detection.previous,n=!1;if(t.deltaTime>i.options.tap_max_touchtime||t.distance>i.options.tap_max_distance)return;s&&"tap"==s.name&&t.timeStamp-s.lastEvent.timeStamp<i.options.doubletap_interval&&t.distance<i.options.doubletap_distance&&(i.trigger("doubletap",t),n=!0),(!n||i.options.tap_always)&&(e.detection.current.name="tap",i.trigger(e.detection.current.name,t))}}},e.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,i){if(t.eventType==e.EVENT_END){if(i.options.swipe_max_touches>0&&t.touches.length>i.options.swipe_max_touches)return;(t.velocityX>i.options.swipe_velocity||t.velocityY>i.options.swipe_velocity)&&(i.trigger(this.name,t),i.trigger(this.name+t.direction,t))}}},e.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,i){if(e.detection.current.name!=this.name&&this.triggered)return i.trigger(this.name+"end",t),void(this.triggered=!1);if(!(i.options.drag_max_touches>0&&t.touches.length>i.options.drag_max_touches))switch(t.eventType){case e.EVENT_START:this.triggered=!1;break;case e.EVENT_MOVE:if(t.distance<i.options.drag_min_distance&&e.detection.current.name!=this.name)return;e.detection.current.name=this.name,(e.detection.current.lastEvent.drag_locked_to_axis||i.options.drag_lock_to_axis&&i.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var s=e.detection.current.lastEvent.direction;t.drag_locked_to_axis&&s!==t.direction&&(t.direction=e.utils.isVertical(s)?t.deltaY<0?e.DIRECTION_UP:e.DIRECTION_DOWN:t.deltaX<0?e.DIRECTION_LEFT:e.DIRECTION_RIGHT),this.triggered||(i.trigger(this.name+"start",t),this.triggered=!0),i.trigger(this.name,t),i.trigger(this.name+t.direction,t),(i.options.drag_block_vertical&&e.utils.isVertical(t.direction)||i.options.drag_block_horizontal&&!e.utils.isVertical(t.direction))&&t.preventDefault();break;case e.EVENT_END:this.triggered&&i.trigger(this.name+"end",t),this.triggered=!1}}},e.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,i){if(e.detection.current.name!=this.name&&this.triggered)return i.trigger(this.name+"end",t),void(this.triggered=!1);if(!(t.touches.length<2))switch(i.options.transform_always_block&&t.preventDefault(),t.eventType){case e.EVENT_START:this.triggered=!1;break;case e.EVENT_MOVE:var s=Math.abs(1-t.scale),n=Math.abs(t.rotation);if(s<i.options.transform_min_scale&&n<i.options.transform_min_rotation)return;e.detection.current.name=this.name,this.triggered||(i.trigger(this.name+"start",t),this.triggered=!0),i.trigger(this.name,t),n>i.options.transform_min_rotation&&i.trigger("rotate",t),s>i.options.transform_min_scale&&(i.trigger("pinch",t),i.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case e.EVENT_END:this.triggered&&i.trigger(this.name+"end",t),this.triggered=!1}}},e.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,i){return i.options.prevent_mouseevents&&t.pointerType==e.POINTER_MOUSE?void t.stopDetect():(i.options.prevent_default&&t.preventDefault(),void(t.eventType==e.EVENT_START&&i.trigger(this.name,t)))}},e.gestures.Release={name:"release",index:1/0,handler:function(t,i){t.eventType==e.EVENT_END&&i.trigger(this.name,t)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=e:(t.Hammer=e,"function"==typeof t.define&&t.define.amd&&t.define("hammer",[],function(){return e}))}(this),function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(t){return 0==t?0:t>0?1:-1});{var t={subtract:function(t,i){return{x:t.x-i.x,y:t.y-i.y}},dotProduct:function(t,i){return t.x*i.x+t.y*i.y},square:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},scale:function(t,i){return{x:t.x*i,y:t.y*i}}},i=64,s=Math.pow(2,-i-1),e=function(i,s){for(var e=[],n=r(i,s),o=s.length-1,h=2*o-1,l=a(n,h,e,0),u=t.subtract(i,s[0]),g=t.square(u),m=0,p=0;l>p;p++){u=t.subtract(i,c(s,o,e[p],null,null));var d=t.square(u);g>d&&(g=d,m=e[p])}return u=t.subtract(i,s[o]),d=t.square(u),g>d&&(g=d,m=1),{location:m,distance:g}},n=function(t,i){var s=e(t,i);return{point:c(i,i.length-1,s.location,null,null),location:s.location}},r=function(i,s){for(var e=s.length-1,n=2*e-1,r=[],a=[],o=[],h=[],l=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],c=0;e>=c;c++)r[c]=t.subtract(s[c],i);for(var c=0;e-1>=c;c++)a[c]=t.subtract(s[c+1],s[c]),a[c]=t.scale(a[c],3);for(var u=0;e-1>=u;u++)for(var g=0;e>=g;g++)o[u]||(o[u]=[]),o[u][g]=t.dotProduct(a[u],r[g]);for(c=0;n>=c;c++)h[c]||(h[c]=[]),h[c].y=0,h[c].x=parseFloat(c)/n;for(var m=e,p=e-1,d=0;m+p>=d;d++){var f=Math.max(0,d-p),y=Math.min(d,m);for(c=f;y>=c;c++)j=d-c,h[c+j].y+=o[j][c]*l[j][c]}return h},a=function(t,s,e,n){var r,u,g=[],m=[],p=[],d=[];switch(o(t,s)){case 0:return 0;case 1:if(n>=i)return e[0]=(t[0].x+t[s].x)/2,1;if(h(t,s))return e[0]=l(t,s),1}c(t,s,.5,g,m),r=a(g,s,p,n+1),u=a(m,s,d,n+1);for(var f=0;r>f;f++)e[f]=p[f];for(var f=0;u>f;f++)e[f+r]=d[f];return r+u},o=function(t,i){var s,e,n=0;s=e=Math.sgn(t[0].y);for(var r=1;i>=r;r++)s=Math.sgn(t[r].y),s!=e&&n++,e=s;return n},h=function(t,i){var e,n,r,a,o,h,l,c,u,g,m,p,d,f,y,x;h=t[0].y-t[i].y,l=t[i].x-t[0].x,c=t[0].x*t[i].y-t[i].x*t[0].y;for(var v=max_distance_below=0,T=1;i>T;T++){var E=h*t[T].x+l*t[T].y+c;E>v?v=E:max_distance_below>E&&(max_distance_below=E)}return m=0,p=1,d=0,f=h,y=l,x=c-v,u=m*y-f*p,g=1/u,n=(p*x-y*d)*g,f=h,y=l,x=c-max_distance_below,u=m*y-f*p,g=1/u,r=(p*x-y*d)*g,a=Math.min(n,r),o=Math.max(n,r),e=o-a,s>e?1:0},l=function(t,i){var s=1,e=0,n=t[i].x-t[0].x,r=t[i].y-t[0].y,a=t[0].x-0,o=t[0].y-0,h=n*e-r*s,l=1/h,c=(n*o-r*a)*l;return 0+s*c},c=function(t,i,s,e,n){for(var r=[[]],a=0;i>=a;a++)r[0][a]=t[a];for(var o=1;i>=o;o++)for(var a=0;i-o>=a;a++)r[o]||(r[o]=[]),r[o][a]||(r[o][a]={}),r[o][a].x=(1-s)*r[o-1][a].x+s*r[o-1][a+1].x,r[o][a].y=(1-s)*r[o-1][a].y+s*r[o-1][a+1].y;if(null!=e)for(a=0;i>=a;a++)e[a]=r[a][0];if(null!=n)for(a=0;i>=a;a++)n[a]=r[i-a][a];return r[i][0]},u={},g=function(t){var i=u[t];if(!i){i=[];var s=function(){return function(i){return Math.pow(i,t)}},e=function(){return function(i){return Math.pow(1-i,t)}},n=function(t){return function(){return t}},r=function(){return function(t){return t}},a=function(){return function(t){return 1-t}},o=function(t){return function(i){for(var s=1,e=0;e<t.length;e++)s*=t[e](i);return s}};i.push(new s);for(var h=1;t>h;h++){for(var l=[new n(t)],c=0;t-h>c;c++)l.push(new r);for(var c=0;h>c;c++)l.push(new a);i.push(new o(l))}i.push(new e),u[t]=i}return i},m=function(t,i){for(var s=g(t.length-1),e=0,n=0,r=0;r<t.length;r++)e+=t[r].x*s[r](i),n+=t[r].y*s[r](i);return{x:e,y:n}},p=function(t,i){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))},d=function(t){return t[0].x==t[1].x&&t[0].y==t[1].y},f=function(t,i,s){if(d(t))return{point:t[0],location:i};for(var e=m(t,i),n=0,r=i,a=s>0?1:-1,o=null;n<Math.abs(s);)r+=.005*a,o=m(t,r),n+=p(o,e),e=o;return{point:o,location:r}},y=function(t){if(d(t))return 0;for(var i=m(t,0),s=0,e=0,n=1,r=null;1>e;)e+=.005*n,r=m(t,e),s+=p(r,i),i=r;return s},x=function(t,i,s){return f(t,i,s).point},v=function(t,i,s){return f(t,i,s).location},T=function(t,i){var s=m(t,i),e=m(t.slice(0,t.length-1),i),n=e.y-s.y,r=e.x-s.x;return 0==n?1/0:Math.atan(n/r)},E=function(t,i,s){var e=f(t,i,s);return e.location>1&&(e.location=1),e.location<0&&(e.location=0),T(t,e.location)},P=function(t,i,s,e){e=null==e?0:e;var n=f(t,i,e),r=T(t,n.location),a=Math.atan(-1/r),o=s/2*Math.sin(a),h=s/2*Math.cos(a);return[{x:n.point.x+h,y:n.point.y+o},{x:n.point.x-h,y:n.point.y-o}]};window.jsBezier={distanceFromCurve:e,gradientAtPoint:T,gradientAtPointAlongCurveFrom:E,nearestPointOnCurve:n,pointOnCurve:m,pointAlongCurveFrom:x,perpendicularToCurveAt:P,locationAlongCurveFrom:v,getLength:y}}}(),function(t,i){var s,e=t.jQuery||t.Cowboy||(t.Cowboy={});e.throttle=s=function(t,s,n,r){function a(){function e(){h=+new Date,n.apply(l,u)}function a(){o=i}var l=this,c=+new Date-h,u=arguments;r&&!o&&e(),o&&clearTimeout(o),r===i&&c>t?e():s!==!0&&(o=setTimeout(r?a:e,r===i?t-c:t))
}var o,h=0;return"boolean"!=typeof s&&(r=n,n=s,s=i),e.guid&&(a.guid=n.guid=n.guid||e.guid++),a},e.debounce=function(t,e,n){return n===i?s(t,e,!1):s(t,n,e!==!1)}}(this),tremulaConfigs={"default":function(){return{onChangePub:this.doScrollEvents,data:null,maxWidthClassMap:{mini:50,small:143,medium:244,large:2e3},lastContentBlock:{template:'<div class="lastContentItem">This item will remain at the end of the stream.  Use it for a loading message container if you like.</div>',layoutType:"tremulaBlockItem",noScaling:!0,w:300,h:390,isLastContentBlock:!0,adapter:this.dataAdapters.TremulaItem},adapter:null,itemConstraint:300,itemMargins:[30,30],staticAxisOffset:0,scrollAxisOffset:20,scrollAxis:"x",staticAxisCount:0,isLooping:!1,ignoreUserEvents:!1,defaultLayout:this.layouts.basicGridLayout,surfaceMap:this.projections.streamHorizontal,itemPreloading:!0,itemEasing:!1,itemEasingParams:{touchCurve:this.easings.easeOutCubic,swipeCurve:this.easings.easeOutCubic,transitionCurve:this.easings.easeOutElastic,easeTime:500,springLimit:40}}}};var userPath=[{x:0,y:0},{x:.5,y:.7},{x:.5,y:.7},{x:1,y:0}],softKnee=[{x:0,y:.5},{x:.45,y:.5},{x:.55,y:.5},{x:1,y:.5}],thumbRollerDialPath=[{x:0,y:0},{x:0,y:1},{x:1,y:0},{x:1,y:1}],twelveToSixPath=[{x:1,y:0},{x:.75,y:.25},{x:.75,y:.75},{x:1,y:1}],sixToTwelvePath=[{x:0,y:0},{x:.25,y:.25},{x:.25,y:.75},{x:0,y:1}];!function(){var t,i,s;!function(e){function n(t,i){return T.call(t,i)}function r(t,i){var s,e,n,r,a,o,h,l,c,u,g,m=i&&i.split("/"),p=x.map,d=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(i){for(m=m.slice(0,m.length-1),t=t.split("/"),a=t.length-1,x.nodeIdCompat&&P.test(t[a])&&(t[a]=t[a].replace(P,"")),t=m.concat(t),c=0;c<t.length;c+=1)if(g=t[c],"."===g)t.splice(c,1),c-=1;else if(".."===g){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((m||d)&&p){for(s=t.split("/"),c=s.length;c>0;c-=1){if(e=s.slice(0,c).join("/"),m)for(u=m.length;u>0;u-=1)if(n=p[m.slice(0,u).join("/")],n&&(n=n[e])){r=n,o=c;break}if(r)break;!h&&d&&d[e]&&(h=d[e],l=c)}!r&&h&&(r=h,o=l),r&&(s.splice(0,o,r),t=s.join("/"))}return t}function a(t,i){return function(){return m.apply(e,E.call(arguments,0).concat([t,i]))}}function o(t){return function(i){return r(i,t)}}function h(t){return function(i){f[t]=i}}function l(t){if(n(y,t)){var i=y[t];delete y[t],v[t]=!0,g.apply(e,i)}if(!n(f,t)&&!n(v,t))throw new Error("No "+t);return f[t]}function c(t){var i,s=t?t.indexOf("!"):-1;return s>-1&&(i=t.substring(0,s),t=t.substring(s+1,t.length)),[i,t]}function u(t){return function(){return x&&x.config&&x.config[t]||{}}}var g,m,p,d,f={},y={},x={},v={},T=Object.prototype.hasOwnProperty,E=[].slice,P=/\.js$/;p=function(t,i){var s,e=c(t),n=e[0];return t=e[1],n&&(n=r(n,i),s=l(n)),n?t=s&&s.normalize?s.normalize(t,o(i)):r(t,i):(t=r(t,i),e=c(t),n=e[0],t=e[1],n&&(s=l(n))),{f:n?n+"!"+t:t,n:t,pr:n,p:s}},d={require:function(t){return a(t)},exports:function(t){var i=f[t];return"undefined"!=typeof i?i:f[t]={}},module:function(t){return{id:t,uri:"",exports:f[t],config:u(t)}}},g=function(t,i,s,r){var o,c,u,g,m,x,T=[],E=typeof s;if(r=r||t,"undefined"===E||"function"===E){for(i=!i.length&&s.length?["require","exports","module"]:i,m=0;m<i.length;m+=1)if(g=p(i[m],r),c=g.f,"require"===c)T[m]=d.require(t);else if("exports"===c)T[m]=d.exports(t),x=!0;else if("module"===c)o=T[m]=d.module(t);else if(n(f,c)||n(y,c)||n(v,c))T[m]=l(c);else{if(!g.p)throw new Error(t+" missing "+c);g.p.load(g.n,a(r,!0),h(c),{}),T[m]=f[c]}u=s?s.apply(f[t],T):void 0,t&&(o&&o.exports!==e&&o.exports!==f[t]?f[t]=o.exports:u===e&&x||(f[t]=u))}else t&&(f[t]=s)},t=i=m=function(t,i,s,n,r){if("string"==typeof t)return d[t]?d[t](i):l(p(t,i).f);if(!t.splice){if(x=t,x.deps&&m(x.deps,x.callback),!i)return;i.splice?(t=i,i=s,s=null):t=e}return i=i||function(){},"function"==typeof s&&(s=n,n=r),n?g(e,t,i,s):setTimeout(function(){g(e,t,i,s)},4),m},m.config=function(t){return m(t)},t._defined=f,s=function(t,i,s){i.splice||(s=i,i=[]),!n(f,t)&&!n(y,t)&&(y[t]=[t,i,s])},s.amd={jQuery:!0}}(),s("almond",function(){}),s("Layouts",[],function(){function t(t,i){function s(){var t=0;if(a>0)for(var i=1;a>=i;i++){if(!l[t])return t;if(!l[i])return i;t=l[i]<l[t]?i:t}return t}function e(){var t=0;if(a>0)for(var i=1;a>=i;i++)t=l[i]>l[t]?i:t;return t}var n="basicGridLayout",r=this;i=i?i:{};var a=i.axes||i.staticAxisCount;a||(a=0),r.layout_cache||(r.layout_cache={lastLayoutOptions:i,lastLayoutId:n,axesLengthArr:new Array(a),lastAxesObjArr:new Array(a)});var o=(t.index,r.itemConstraint),h=[2*r.itemMargins[0],2*r.itemMargins[1]],l=r.layout_cache.axesLengthArr,c=r.layout_cache.lastAxesObjArr,u=t.layoutType,g="tremulaBlockItem"==u?e():s();if(t.staticAxis=g,c[g]){t.prevObj=c[g],t.prevObj.nextObj=t;var m=t.prevObj.tailPointPos;t.headPointPos[r.si]=m[r.si]}else t.headPointPos[r.si]=0;var p="tremulaBlockItem"==u?0:o*g+h[r.si_]*g;t.headPointPos[r.si_]=p,t.tailPointPos=[t.headPointPos[0]+t.w+h[0],t.headPointPos[1]+t.h+h[1]],t.outerDims=[t.tailPointPos[0]-t.headPointPos[0],t.tailPointPos[1]-t.headPointPos[1]],c[g]=t,l[g]=(l[g]||0)+t.dims[r.si]}function i(t,i){var s=this;i=i?i:{};var e=(i.axisCount,t.index);if(0==e)t.headPointPos=[0,0];else{t.prevObj=s.boxes[e-1],t.prevObj.nextObj=t;var n=t.prevObj.tailPointPos;t.headPointPos[s.si]=n[s.si];var r=n[s.si];t.headPointPos[s.si_]=r}t.tailPointPos=[20+t.headPointPos[0],t.headPointPos[1]]}return{basicGridLayout:t,stackLayout:i}}),s("Easings",[],function(){function t(t,i,s,e,n){return e*(i/n)+s}function i(t,i,s,e,n){return e*Math.sin(i/n*(Math.PI/2))+s}function s(t,i,s,e,n){return i/=n/2,1>i?e/2*i*i+s:(i--,-e/2*(i*(i-2)-1)+s)}function e(t,i,s,e,n){return-e*((i=i/n-1)*i*i*i-1)+s}function n(t,i,s,e,n){return i/=n,i--,e*(i*i*i+1)+s}function r(t,i,s,e,n){return i/=n/2,1>i?e/2*i*i*i+s:(i-=2,e/2*(i*i*i+2)+s)}function a(t,i,s,e,n){var r=1.70158,a=0,o=e;if(0==i)return s;if(1==(i/=n))return s+e;if(a||(a=.3*n),o<Math.abs(e)){o=e;var r=a/4}else var r=a/(2*Math.PI)*Math.asin(e/o);return o*Math.pow(2,-10*i)*Math.sin(2*(i*n-r)*Math.PI/a)+e+s}function o(t){return t*t*t*t*t}function h(t){return 1+--t*t*t*t*t}return{linearOut:t,easeOutSine:i,easeInOutQuad:s,easeOutQuart:e,easeOutCubic:n,easeInOutCubic:r,easeOutElastic:a,easeInQuint_t:o,easeOutQuint_t:h}}),s("DataAdapters",[],function(){function t(t){this.data=t,this.imgUrl=t.imgUrl,this.w=this.width=t.w,this.h=this.height=t.h,this.isLastContentBlock=t.isLastContentBlock||!1,this.layoutType=this.data.layoutType||"tremulaInline",this.noScaling=this.data.noScaling||!1,this.auxClassList=t.auxClassList||"",this.template=this.data.template||""}function i(t,i){this.data=t,this.isLastContentBlock=t.isLastContentBlock,this.layoutType=this.data.layoutType||"tremulaInline",this.noScaling=this.data.noScaling||!1,this.isFavorite=t.isFavorite,this.auxClassList=t.auxClassList||"";var s=i.options.itemConstraint;if(t.UrlInfo){var e="http://imgc.artprintimages.com/images/P-{{w}}-{{h}}-85/"+t.UrlInfo.ImageUrl.split("/MED/")[1];this.src=i.sx?e.replace(/{{w}}/,"1000").replace(/{{h}}/,s):e.replace(/{{h}}/,"1000").replace(/{{w}}/,s),this.w=this.width=t.ImageDimensions[2].PixelWidth,this.h=this.height=t.ImageDimensions[2].PixelHeight,this.imgUrl=this.src,this.data.JudyLastNativeAspectImgURL=this.imgUrl,this.auxClassList="judyRS "+this.auxClassList}else this.w=this.width=this.data.w||100,this.h=this.height=this.data.h||100,this.imgUrl="";this.artistName="",this.artistUrl="",this.itemTitle="",this.itemPrice="";var n="",r="";t.Artist&&(n=t.Artist.FirstName||""),t.Artist&&(r=t.Artist.LastName||""),t.Artist&&(this.artistName=(n+" "+r).replace(/  /g," ").trim()||""),t.Artist&&(this.artistUrl=(t.Artist.ArtistUrl||"").replace(/gallery/g,"discover")||""),t.Title&&(this.itemTitle=t.Title||""),t.ItemPrice&&(this.itemPrice=t.ItemPrice.Price),this.artistNameTitle=this.artistName+(this.artistName&&this.itemTitle?", ":"")+this.itemTitle,this.template=this.data.template||'<img draggable="false" class="moneyShot" onload="imageLoaded(this)" src=""/> <div class="boxLabel">{{artistNameTitle}}</div>'.replace(/{{artistNameTitle}}/g,this.artistNameTitle).replace(/{{itemTitle}}/g,this.itemTitle);var a=i.options.itemConstraint,o=a/this[i.saDim_],h=this[i.saDim]*o,l=[h,a],c=i.options.maxWidthClassMap;if(c)for(key in c)if(l[0]<c[key]){this.auxClassList=this.auxClassList+" "+key;break}}function s(t,i){this.data=t,this.isLastContentBlock=t.isLastContentBlock||!1,this.layoutType=this.data.layoutType||"tremulaInline",this.noScaling=this.data.noScaling||!1,this.isFavorite=t.isFavorite||!1,this.auxClassList=t.auxClassList||"";i.options.itemConstraint;t.url_z?(this.src=t.url_z,this.w=this.width=t.width_z,this.h=this.height=t.height_z,this.imgUrl=this.src,this.auxClassList="flickrRS "+this.auxClassList):(this.w=this.width=this.data.w||100,this.h=this.height=this.data.h||100,this.imgUrl=""),this.itemTitle=t.title||"",this.template=this.data.template||'<img draggable="false" class="moneyShot" onload="imageLoaded(this)" src=""/> <div class="boxLabel">{{itemTitle}}</div>'.replace(/{{itemTitle}}/g,"")}function e(t){this.imgUrl_SM=t.UrlInfo.ImageUrl,this.imgUrl_LG=t.UrlInfo.XLargeUrl,this.imgUrl_ZOOM=t.UrlInfo.ZoomUrlWithoutWatermark,this.imgUrl_SQ=t.UrlInfo.CroppedSquareImageUrl,this.data=t,this.w=this.width=100,this.h=this.height=100,this.imgUrl=this.imgUrl_SQ,this.data.JudyLastNativeAspectImgURL=null}return{TremulaItem:t,flickrSearch:s,JudyItem:i,JudyItem_SQ:e}}),s("Projections",[],function(){function t(t,i){var s=[{x:t[3].x*i[0],y:t[3].y*i[1]},{x:t[2].x*i[0],y:t[2].y*i[1]},{x:t[1].x*i[0],y:t[1].y*i[1]},{x:t[0].x*i[0],y:t[0].y*i[1]}];return s}function i(i,s){var e,n,r=d,a=this.parent.gridDims[0],o=this.parent.gridDims[1],h=this.parent.currentGridContentDims,l=this.waves.tailRamp,c=this.waves.headRamp,u=this.waves.triangle,g=[a,o],m=t(r,g),p=jsBezier.pointOnCurve(m,c),e=(jsBezier.gradientAtPoint(m,c),a-.5*this.outerDims[0]-p.x),n=p.y-.5*this.dims[1]+s-.5*(h[1]-this.dims[1])-this.itemMargins[1],f=Math.min(-400,-1e3*(1-u));this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+n+"px, "+f+"px) rotateY("+(180*l-90)+"deg)",this.e.style.opacity=Math.min(1,2*u-.5),this.pPos=[i,s]}function s(i,s){var e,n,r=f,a=this.parent.gridDims[0],o=this.parent.gridDims[1],h=this.parent.currentGridContentDims,l=(this.waves.tailRamp,this.waves.headRamp),c=this.waves.triangle,u=[a,o],g=t(r,u),m=jsBezier.pointOnCurve(g,l),e=(jsBezier.gradientAtPoint(g,l),a-.5*this.outerDims[0]-m.x),n=m.y-.5*this.dims[1]+s-.5*(h[1]-this.dims[1])-this.itemMargins[1],p=Math.max(-800,-1e3*c);this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+n+"px, "+p+"px) rotateY("+(180*l-90)+"deg)",this.e.style.opacity=Math.min(1,2*c-.5),this.pPos=[i,s]}function e(i,s){var e,n,r=m,a=this.parent.gridDims[0],o=this.parent.gridDims[1],h=(this.waves.tailRamp,this.waves.headRamp),l=(this.waves.triangle,[a,o]),c=t(r,l),u=jsBezier.pointOnCurve(c,h),g=jsBezier.gradientAtPoint(c,h),e=a-.5*this.outerDims[0]-u.x,n=s+this.itemMargins[1]+(o-.5*this.outerDims[1])-u.y;this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+n+"px, 0) rotateZ("+60*g+"deg)",this.e.style.opacity=1,this.pPos=[i,s]}function n(i,s){var e,n,r=1e3,a=this.parent.gridDims[0],o=this.parent.gridDims[1],h=this.parent.currentGridContentDims,l=(this.waves.tailRamp,this.waves.headRamp),c=(this.waves.triangle,[a,o]),u=r>a?641>a?g:m:p,d=t(u,c),f=jsBezier.pointOnCurve(d,l),y=jsBezier.gradientAtPoint(d,l),e=a-.5*this.outerDims[0]-f.x,n=f.y-.5*this.dims[1]+s-.5*(h[1]-this.dims[1])-this.itemMargins[1];this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+n+"px, 0) rotateZ("+-60*y+"deg)",this.e.style.opacity=1,this.pPos=[i,s]}function r(i,s){var e,n,r=v,a=this.parent.gridDims[0],o=this.parent.gridDims[1],h=this.parent.currentGridContentDims,l=this.waves.tailRamp,c=this.waves.headRamp,u=(this.waves.triangle,[a,o]),g=t(r,u),m=jsBezier.pointOnCurve(g,c),e=(jsBezier.gradientAtPoint(g,l),a-m.x-.5*this.dims[0]),n=m.y-.5*this.dims[1]-(.5*(h[1]-this.dims[1])-s-this.itemMargins[1]),p=0;this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+n+"px, "+p+"px)";var d=1e6-this.index;this.e.style.zIndex=d,this.e.style.opacity=1,this.pPos=[i,s]}function a(i,s){var e,n,r=T,a=this.parent.gridDims[0],o=this.parent.gridDims[1],h=this.parent.currentGridContentDims,l=this.waves.tailRamp,c=(this.waves.headRamp,this.waves.triangle,[a,o]),u=t(r,c),g=jsBezier.pointOnCurve(u,l),e=(jsBezier.gradientAtPoint(u,l),g.x-.5*this.dims[0]),n=o-g.y-.5*this.dims[1]-(.5*(h[1]-this.dims[1])-s-this.itemMargins[1]),m=0;this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+n+"px, "+m+"px)";var p=1e6-this.index;this.e.style.zIndex=p,this.e.style.opacity=1,this.pPos=[i,s]}function o(i,s){var e,n,r=y,a=this.parent.gridDims,o=(this.parent.currentGridContentDims,this.waves.tailRamp,this.waves.headRamp),h=(this.waves.triangle,[a[0],a[1]]),l=t(r,h),c=jsBezier.pointOnCurve(l,o),e=(jsBezier.gradientAtPoint(l,o),a[0]-.5*this.outerDims[0]-c.x),n=c.y-.5*this.dims[1]*(this.parent.staticAxisCount+1)+s-this.parent.itemMargins[1]*this.parent.staticAxisCount,u=0;this.e.style.webkitTransformOrigin=this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+n+"px, "+u+"px)";var g=1e6-this.index;this.e.style.zIndex=g,this.e.style.opacity=1,this.pPos=[i,s]}function h(i,s){var e,n,r=x,a=this.parent.staticAxisCount+1,o=this.parent.gridDims,h=(this.parent.currentGridContentDims,this.waves.tailRamp,this.waves.headRamp),l=(this.waves.triangle,[o[0],o[1]]),c=t(r,l),u=jsBezier.pointOnCurve(c,h),e=(jsBezier.gradientAtPoint(c,h),u.x-.5*this.dims[0]*a+i-this.parent.itemMargins[0]*this.parent.staticAxisCount),n=o[1]-.5*this.outerDims[1]-u.y,g=0;this.e.style.webkitTransformOrigin=this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+n+"px, "+g+"px)";var m=1e6-this.index;this.e.style.zIndex=m,this.e.style.opacity=1,this.pPos=[i,s]}function l(t,i){{var s,e,n=this.waves;n.tailRamp,n.headRamp,n.triangle}s=t,e=i,zo=0,this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+s+"px,"+e+"px, "+zo+"px)",this.e.style.opacity=1,this.pPos=[t,i]}function c(t,i){var s,e,n=this.waves,r=(n.tailRamp,n.headRamp,n.triangle);s=t,e=i,this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+s+"px,"+e+"px, 0) scale("+(1*r+.4)+")",this.e.style.opacity=r,this.pPos=[t,i]}var u={},g=[{x:0,y:.57},{x:.33,y:.5},{x:.66,y:.5},{x:1,y:.57}],m=[{x:0,y:.65},{x:.33,y:.5},{x:.66,y:.5},{x:1,y:.65}],p=[{x:0,y:.9},{x:.33,y:.4},{x:.66,y:.4},{x:1,y:.9}],d=[{x:0,y:.5},{x:.45,y:.5},{x:.55,y:.5},{x:1,y:.5}],f=[{x:-.1,y:.5},{x:.6,y:.5},{x:.4,y:.5},{x:1.1,y:.5}],y=[{x:0,y:.5},{x:.33,y:.5},{x:.66,y:.5},{x:1,y:.5}],x=[{x:.5,y:0},{x:.5,y:.33},{x:.5,y:.66},{x:.5,y:1}];jsBezier.factorCurveBy=t,u.turntable=i,u.enterTheDragon=s,u.sunrise=e,u.mountain=n;var v=[{x:0,y:0},{x:0,y:.5},{x:.5,y:1},{x:1,y:1}];u.bezierQuad=r;var T=[{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:0}];return u.bezierShape=a,u.streamHorizontal=o,u.pinterest=h,u.xyPlain=l,u.xyBumpTaper=c,u}),s("Animator",[],function(){var t=function(t){t||(t={});t.parent;return this.resetAnimation=function(){this.easingCurve=t.easingCurve,this.easeToDuration=t.easeTime||500,this.isEasing=!1,this.activeDuration=0,this.easingProgress=this.activeDuration,this.easeFactor=0,this.easingStartTime=0,this.easeToStart=0,this.easeToDiff=0,t.parent.isEasing=!1},this.animateFrTo=function(i,s,e,n){e=void 0==e?this.easeToDuration:e,n&&(this.easingCurve=n);var r=e,a=i-s;this.easeToDiff=-1*a,this.isEasing=!0,this.activeDuration=r,this.easingStartTime=new Date,this.easingProgress=0,t.parent.isEasing=!0},this.getNextFrameDiff=function(){var t=this.easingProgress<this.activeDuration;t?(this.easingProgress=new Date-this.easingStartTime,this.easeFactor=this.easingCurve(null,this.easingProgress,0,1,this.activeDuration)):this.resetAnimation();var i=this.easeToDiff*(1-this.easeFactor);return i},this.resetAnimation(),{isEasing:function(){return this.isEasing},resetAnimation:this.resetAnimation,animateFrTo:this.animateFrTo,getNextFrameDiff:this.getNextFrameDiff}};return t}),s("Box",["Easings","Animator"],function(t,i){var s=function(s){this.parent=s;var e=this;this.ezEnabled=function(){return this.parent.itemEasing},this.ezOptions=this.parent.options.itemEasingParams,this.doPreloading=this.parent.options.itemPreloading,this.getlayoutXansEasing=function(){return this.parent.layoutXansEasing},this.getLayoutIsXing=function(){return this.parent.layoutIsXing},this.getLayoutXingMs=function(){return this.parent.layoutXansMs},this.springLimit=this.parent.springLimit,this.itemMargins=this.parent.itemMargins,this.index=null,this.x=this.y=0,this.dims=[0,0],this.outerDims=[0,0],this.staticAxis=0,this.headPointPos=[0,0],this.tailPointPos=[0,0],this.pPos=[0,0],this.prevObj=null,this.nextObj=null,this.targetPaintPos=[0,0],this.currentPaintPos=[0,0],this.targetXY=[0,0],this.currentXY=[0,0],this.sizeRatio=0,this.displayClass="",this.isOnScreen=!1,this.isLoaded=!1,this.hasEntered=!1,this.ani_si=new i({easingCurve:t.easeOutCubic,parent:this}),this.ani_si_=new i({easingCurve:t.easeOutCubic,parent:this}),this.element=this.e=document.createElement("div"),this.$e=$(this.e),this.element.classList.add("gridBox"),this.e.style.display="none",this.model={},this.setModel=function(t){this.model=t,this.model.data.getNextJudyItem=function(){var t=s.getBoxFromIndex(e.index+1);return t&&t.model&&(t=t.model.data),t},this.model.data.getPrevJudyItem=function(){var t=s.getBoxFromIndex(e.index-1);return t&&t.model&&(t=t.model.data),t},this.layoutType=t.layoutType||"tremulaInLine",this.noScaling=t.noScaling||!1,""==this.e.innerHTML.trim()&&(this.e.innerHTML=this.model.template?this.model.template:'<div class="boxLabel">X</div><img draggable="false" class="moneyShot" onload="imageLoaded(this)" src=""/>',this.$moneyShot=$(".moneyShot",this.$e),this.$c=$(".boxLabel",this.e)),this.$e.data("model",this),t.auxClassList&&this.$e.addClass(t.auxClassList),t.isLastContentBlock&&this.$e.addClass("isLastContentBlock"),t.isFavorite?this.$e.addClass("isFavorite"):this.$e.removeClass("isFavorite")}};return s.prototype.updateContent=function(){this.$c.length&&this.$c.html(this.index+"<br/>"+this.waves.headRamp.toFixed(3))},s.prototype.setDimensions=function(t,i){this.e.style.width=t+"px",this.e.style.height=i+"px",this.dims[0]=this.width=this.w=t,this.dims[1]=this.height=this.h=i,this.sizeRatio=i/t,this.displayClass=this.getDisplayClass(this.sizeRatio)},s.prototype.getDisplayClass=function(t){return t>1.1?"portrait":.9>t?"landscape":"square"},s.prototype.paintToSurfaceMap=function(t,i){this.parent.surfaceMap.call(this,t,i)},s.prototype.remove=function(){this.parent.e.removeChild(this.e)},s.prototype.doOnScreen=function(t){if(void 0!=t&&this.isOnScreen!==t){this.isOnScreen=t,t&&!this.isLoaded&&this.$moneyShot.attr("src",this.model.imgUrl);{var i=this.e.classList;this.e.style.display}t?(this.hasEntered||(this.hasEntered=!0,setTimeout(function(){i.add("hasEntered")},10)),this.e.style.display="block",setTimeout(function(){i.add("onScreen")},10)):(this.e.style.display="none",i.remove("onScreen")),this.isLoaded=!0}return this.isOnScreen},s.prototype.setWaveforms=function(t){this.waves=t},s.prototype.getSaEvtStats=function(){var t=this.parent.si,i=this.pPos[t],s=i+.5*this.outerDims[t],e=this.parent.saEventPos,n=s-e;return{d:n,dPercent:n/this.parent.gridDims[t],isOnEvtPos:e>=i&&e<=i+this.outerDims[t]?!0:!1}},s.prototype.setAbsPos=function(t,i){if(!this.ezEnabled()&&!this.getLayoutIsXing())return this.currentXY[0]=t,this.x=t,this.currentXY[1]=i,this.y=i,void 0;var s=(this.isOnSaEvt,this.getSaEvtStats());this.isOnSaEvt=s.isOnEvtPos,this.saEvtDistance=s.d,this.saEvtDistPercent=s.dPercent;var e=s.dPercent,n=Math.abs(e)<.09,r=5*(1-this.parent.easingPercent),a=this.parent.si,o=this.parent.si_,h=a?i:t,l=o?i:t,c=h>this.targetXY[a]+r||h<this.targetXY[a]-r||n?1:0,u=l>this.targetXY[o]+r||l<this.targetXY[o]-r||n?1:0;if(h!=this.targetXY[a]&&c||l!=this.targetXY[o]&&u){this.targetXY=[t,i];var g,m;this.getLayoutIsXing()?(g=this.getlayoutXansEasing(),m=this.getLayoutXingMs()):this.parent.isTouching?(g=this.ezOptions.touchCurve,m=this.ezOptions.easeTime):(g=this.ezOptions.swipeCurve,m=this.ezOptions.easeTime),0==this.currentXY[0]&&0==this.currentXY[1]&&(this.currentXY[0]=t,this.currentXY[1]=i),this.ani_si.animateFrTo(this.currentXY[a],this.targetXY[a],m,g),this.ani_si_.animateFrTo(this.currentXY[o],this.targetXY[o],m,g)}var p=this.ani_si.getNextFrameDiff();this.currentXY[a]=Math.abs(p)>.001?this.targetXY[a]-p:this.targetXY[a];var d=this.ani_si_.getNextFrameDiff();this.currentXY[o]=Math.abs(d)>.001?this.targetXY[o]-p:this.targetXY[o];var f=Math.min(Math.abs(e),1),y=this.springLimit,x=this.targetXY[a]+y*f,v=this.targetXY[a]-y*f,T=this.targetXY[o]+y*f,E=this.targetXY[o]-y*f;this.currentXY[a]>x&&(this.currentXY[a]=x),this.currentXY[a]<v&&(this.currentXY[a]=v),this.currentXY[o]>T&&(this.currentXY[o]=T),this.currentXY[o]<E&&(this.currentXY[o]=E),this.x=this.currentXY[0],this.y=this.currentXY[1]},s}),s("Grid",["Easings","Box","Layouts"],function(t,i,s){function e(){var t=this;if(o=new Date,!a){a=!0;var i=setInterval(function(){var s=new Date;s-o>100&&(a=!1,t.handleGesture({type:"release"}),clearInterval(i))},65)}}function n(t){t.preventDefault?t.preventDefault():t.gesture.preventDefault(),t.stopPropagation?t.stopPropagation():t.gesture.stopPropagation()}var r=function(i,s,e){this.physicsLoopRAF=null,this.options=s,this.$e=i,this.e=i[0],this.parent=e,this.parentParentE=i.parent(),this.statsCache={},this.onChangePub=s.onChangePub,this.surfaceMap=function(){},this.setSurfaceMap=function(t){this.surfaceMap=t},this.setSurfaceMap(s.surfaceMap),this.boxCount=0,this.boxes=[],this.steppedScrolling=!1,this.easeToCompensation=0,this.springLimit=s.itemEasingParams.springLimit,this.boxAxisLengths=[0,0],this.currentGridContentDims=[0,0],this.contentDims=[0,0],this.trailingEdgeScrollPos=null,this.scrollAxisOffset=s.scrollAxisOffset,this.staticAxisOffset=s.staticAxisOffset,this.axisOffset=[],this.gridDims=[],this.scrollPos=0,this.absScrollPos=0;this.setScrollPos=function(t,i){this.scrollPos=i?this.scrollPos+t:t},this.getAbsToScrollPos=function(t){return t-this.firstItemPos},this.setAbsScrollPos=function(t,i){return this.scrollPos=i?this.scrollPos+t:this.firstItemPos+t},this.moveToAbsScrollPos=function(t,i){this.scrollPos=i?this.scrollPos+t:this.firstItemPos+t,this.startPhysicsLoop()},this.getScrollViewDim=function(){return this.gridDims[this.si]},this.getScrollDimCenter=function(){return this.gridDims[this.si]/2},this.getScrollPos=function(){return this.scrollPos},this.saEventPos=null,this.saEventPosProgress=0,this.easingPercent=100,this.isEasing=!1,this.isEasingTo=!1,this.marginScrollWarp=!1,this.easeToThresh=2,this.easingProgress=0,this.easingStartTime=0,this.schwingBackDuration=500,this.schwingEasingFn=t.easeOutCubic,this.easingDuration=1800,this.easeToDuration=300,this.activeDuration=this.easingDuration,this.easeToStart=0,this.easeToEnd=0,this.easeToDiff=0,this.dMomentum=100,this.momentum=0,this.momentumLimit=150,this.mouseWheelReleaseTime=100,this.isLooping=s.isLooping||!1,this.isTouching=!1,this.hasData=!1,this.isInTailMargin=!1,this.isInHeadMargin=!1,this.hasShortGridDimsSi=!1,this.hasMediumGridDimsSi=!1,this.scrollDirection=0,this.itemMargins=s.itemMargins,this.itemConstraint=s.itemConstraint,this.staticAxisCount=s.staticAxisCount,this.scrollMarginDefault=-2e3,this.scrollMargin=[0,0],this.firstItemPos=0,this.frameCtr=0,this.frameRateLog=[],this.frameRate=0,this.lastFrameTime=new Date,this.trackFrameRate=function(){var t,i=new Date;this.frameRateLog.push(i-this.lastFrameTime),this.frameRateLog.length>100&&this.frameRateLog.shift(),t=this.frameRateLog.reduce(function(t,i){return t+i}),this.frameRate=1e3/(t/100),this.lastFrameTime=i},this.lastSPL=0,this.splReleaseTime=500,this.fastScrollThresh=20,this.itemEasing=s.itemEasing,this.setItemEasing=function(t){this.itemEasing=t?!0:!1},this.isChildEasing=!1,this.lastSelected=null,this.setLastSelected=function(t){this.lastSelected=t||null},this.getLastSelected=function(){return this.lastSelected},this.getBoxFromIndex=function(t){return this.boxes[t]},this.getLastBoxFromIndex=function(){return this.boxes[this.boxes.length-1]},this.setScrollAxis=function(t){t||(t=this.sa),this.sa="y"==t?"y":"x",this.SA=this.sa.toUpperCase(),this.sx="x"==this.sa,this.si=this.sx?0:1,this.si_=this.sx?1:0,this.saDim=this.sx?"width":"height",this.saDim_=this.sx?"height":"width",this.gridDims[0]=this.$e.width(),this.gridDims[1]=this.$e.height(),this.axisOffset[0]=this.sx?this.scrollAxisOffset:this.staticAxisOffset,this.axisOffset[1]=this.sx?this.staticAxisOffset:this.scrollAxisOffset,void 0==this.scrollPos&&(this.scrollPos=0),this.lastScrollPos=0,this.lastScrollDiff=0,this.bounceMarginDefault=50,this.bounceMargin=this.bounceMarginDefault,this.trailingEdgeScrollPos&&(this.trailingEdgeScrollPos=this.getTrailingEdgeScrollPos())},this.lastUserEvent={time:new Date,evt:"init"},this.tagLastUserEvent=function(t){this.lastUserEvent={time:new Date,evt:t}},this.resetEasing(),this.setScrollAxis(s.scrollAxis)};r.prototype.updateConfig=function(t,i){t.hasOwnProperty("axes")&&(t.staticAxisCount=t.axes),t.hasOwnProperty("surfaceMap")&&this.setSurfaceMap(t.surfaceMap),$.extend(this,t),this.resetAllItemConstraints(),i&&this.setLayout(null,t)},r.prototype.toggleScrollAxis=function(t){this.jumpToScrollProgress(0),t||(t="x"==this.sa?"y":"x"),this.setScrollAxis(t),this.resetAllItemConstraints(),this.setLayout(s.basicGridLayout,{axes:this.staticAxisCount})},r.prototype.toggleIsLooping=function(t){"undefined"==typeof t&&(t=!this.isLooping),this.isLooping=t},r.prototype.setLastTouchOrigin=function(t){if(this.itemEasing&&!this.marginScrollWarp&&t){var i=isNaN(t)?this.getPageSA_evt(t):t,s=i/this.gridDims[this.si];return this.saEventPos=i,this.saEventPosProgress=s,{saEventPos:i,saEventPosProgress:s}}},r.prototype.getScrollFrame=function(){this.frameCtr++,this.isEasing=this.easingProgress<this.activeDuration;var i=0;if(this.isEasing)this.easingProgress=new Date-this.easingStartTime,i=easingFn(null,this.easingProgress,0,1,this.activeDuration),this.easingPercent=Math.min(1,this.easingProgress/this.activeDuration);else{this.resetEasing();var s=new Date;!this.isChildEasing&&s-this.lastSPL>this.splReleaseTime&&this.stopPhysicsLoop()}if(this.isEasingTo){var e=this.easeToDiff*(1-i);this.setScrollPos(this.easeToEnd-e)}else{var e=this.momentum*(1-i);0!=e&&this.setScrollPos(this.scrollPos+e)}this.isInTailMargin=!1,this.isInHeadMargin=!1;var n=this.lastScrollPos-this.scrollPos;if(this.lastScrollDiff=n,(!this.isLooping&&this.scrollPos>this.firstItemPos||this.hasShortGridDimsSi&&this.absScrollPos>2&&!this.steppedScrolling)&&(this.isInHeadMargin=!0,0>n?(this.setLastTouchOrigin(0),this.marginScrollWarp=!0,this.isEasing&&this.activeDuration-this.easingProgress>this.easeToDuration&&(this.activeDuration=this.easeToDuration)):n>0&&(this.marginScrollWarp=!1),this.scrollPos>this.bounceMargin+this.firstItemPos&&(this.setScrollPos(this.bounceMargin+this.firstItemPos),this.resetEasing()),!this.isTouching&&!this.isEasing&&this.easeTo(this.firstItemPos-1,this.schwingBackDuration,this.schwingEasingFn)),!this.isLooping&&this.scrollPos<this.trailingEdgeScrollPos&&(this.isInTailMargin=!0,n>0?(this.setLastTouchOrigin(this.gridDims[this.si]),this.marginScrollWarp=!0,this.activeDuration-this.easingProgress>this.easeToDuration&&(this.activeDuration=this.easeToDuration)):0>n&&(this.marginScrollWarp=!1),this.scrollPos<this.trailingEdgeScrollPos-this.bounceMargin&&(this.setScrollPos(this.trailingEdgeScrollPos-this.bounceMargin),this.resetEasing()),!this.isTouching&&!this.isEasing&&this.easeTo(this.trailingEdgeScrollPos+1,this.schwingBackDuration,this.schwingEasingFn)),!this.isInHeadMargin&&!this.isInTailMargin&&(this.marginScrollWarp=!1),(this.hasShortGridDimsSi||this.marginScrollWarp)&&!this.isEasing){var r;if(r=this.hasShortGridDimsSi&&this.absScrollPos>0?this.absScrollPos:this.scrollPos>0?this.scrollPos-this.firstItemPos:-(this.scrollPos-this.trailingEdgeScrollPos),this.hasMediumGridDimsSi&&this.absScrollPos<0&&(r=this.scrollPos-this.firstItemPos),!this.hasMediumGridDimsSi){var a=Math.min(1,r/this.bounceMargin),o=Math.min(1,t.easeOutQuart(null,a,0,1,1));this.setScrollPos(n*o,!0)}}return this.scrollDirection=n>0?1:0>n?-1:0,this.lastScrollPos=this.scrollPos,this.absScrollPos=-(this.scrollPos-this.firstItemPos),this.scrollProgress=this.absScrollPos/this.absTrailingEdgeScrollPos,this.trackFrameRate(),this.onChangePub&&this.onChangePub(this),this.scrollPos},r.prototype.startPhysicsLoop=function(){if(this.lastSPL=new Date,!this.physicsLoopRAF){var t=this;this.physicsLoopRAF=requestAnimationFrame(function(){t.assignBoxObjects()})}},r.prototype.stopPhysicsLoop=function(){this.physicsLoopRAF&&(cancelAnimationFrame(this.physicsLoopRAF),this.physicsLoopRAF=null)},r.prototype.oneShotPaint=function(t){t&&(this.setLastTouchOrigin(t),this.isEasing&&this.resetEasing(),this.startPhysicsLoop())},r.prototype.getPageSA_evt=function(t){return t&&t.gesture?t.gesture.center["page"+this.SA]:null},r.prototype.getClosestScrollOriginObj=function(){var t,i=this.boxes;return t=this.isInHeadMargin?this.getBoxFromIndex(0):this.isInTailMargin?this.getLastBoxFromIndex():i.reduce(function(t,i){return t.waves.triangle>i.waves.triangle?t:i})},r.prototype.jumpObjTo=function(t,i){this.resetEasing(),i||(i=0),isNaN(i)||(i=this.getBoxFromIndex(i));var s=i.headPointPos[this.si]+.5*i.width;this.setAbsScrollPos(t-s),this.startPhysicsLoop()},r.prototype.easeToThisStepItem=function(t){return this.easeObjTo(this.easeToCompensation,t),this.$e.trigger("stepItemFocus",t),t},r.prototype.easeToClosestStepItem=function(){var t=this.getClosestScrollOriginObj();return this.easeObjTo(this.easeToCompensation,t),this.$e.trigger("stepItemFocus",t),t},r.prototype.easeToNextStepItem=function(t){var i=t||this.getClosestScrollOriginObj(),s=this.getBoxFromIndex(i.index+1);return this.easeObjTo(this.easeToCompensation,s||i),this.$e.trigger("stepItemFocus",s),s},r.prototype.easeToPrevStepItem=function(t){var i=t||this.getClosestScrollOriginObj(),s=this.getBoxFromIndex(i.index-1);return this.easeObjTo(this.easeToCompensation,s||i),this.$e.trigger("stepItemFocus",s),s},r.prototype.jumpToScrollProgress=function(t){t>1&&(t=.999),0>t&&(t=.001),this.setAbsScrollPos(-this.absTrailingEdgeScrollPos*t),this.startPhysicsLoop()},r.prototype.easeObjTo=function(t,i,s,e){i||(i=0),isNaN(i)||(i=this.getBoxFromIndex(i));var n=this.getAbsToScrollPos(i.headPointPos[this.si]+.5*i.width);this.easeTo(t-n,s,e)},r.prototype.easeTo=function(t,i,s){return i=void 0==i?this.easeToDuration:i,s&&(easingFn=s),t>this.firstItemPos&&(t=this.firstItemPos),t<this.trailingEdgeScrollPos&&(t=this.trailingEdgeScrollPos),this.momentum=0,this.easingPercent=0,this.isEasingTo=!0,this.activeDuration=i,this.easingStartTime=new Date,this.easingProgress=0,this.easeToStart=this.scrollPos,this.easeToEnd=t,this.easeToDiff=-1*(this.easeToStart-this.easeToEnd),this.easeToDiff<2&&this.easeToDiff>-2?!1:void this.startPhysicsLoop()
},r.prototype.resetEasing=function(){easingFn=t.easeOutCubic,this.easingProgress=this.activeDuration,this.isEasingTo=!1,this.isEasing=!1,this.easeToDiff=0,this.momentum=0},r.prototype.startEasing=function(t){t&&(t=20*Math.pow(t,3)),this.isInHeadMargin||this.isInTailMargin||(void 0!=t&&(this.momentum=Math.min(Math.max(t,-this.momentumLimit),this.momentumLimit)),this.isEasing=!0,this.easingStartTime=new Date,this.easingProgress=0,this.activeDuration=this.easingDuration,this.startPhysicsLoop())},r.prototype.removeAll=function(){$.each(this.boxes,function(t,i){i.remove()}),this.boxes=[],this.boxCount=0},r.prototype.initBoxes=function(t,e,n){try{t.length}catch(r){return console&&console.log("initBoxes(): No data found.")}e||(e=this.options.adapter),n||($.each(this.boxes,function(t,i){i.remove()}),this.boxes=[],this.boxCount=0);var a=this.options.lastContentBlock,o=this.boxes.filter(function(t){return t.model.isLastContentBlock}).length>0;if(a&&!o&&t.splice(0,0,a),t){for(var h=this.boxCount,l=this.boxCount+=t.length,c=h;l>c;c++){var u,g=new i(this),m=t[c-h];m.isLastContentBlock&&m.adapter?(u=new m.adapter(t[c-h],this)||{},u.isLastContentBlock=!0):u=new e(t[c-h],this)||{},u.width=u.width||1,u.w=u.w||1,u.height=u.height||1,u.h=u.h||1,g.setModel(u);var p=g.noScaling?[g.model[this.saDim],g.model[this.saDim_]]:this.getConstrainedItemDims(g);g.setDimensions(p[this.si],p[this.si_]),a&&c>0?this.boxes.splice(-1,0,g):"insert"==n?this.boxes.splice(0,0,g):this.boxes.push(g),this.e.appendChild(g.e)}this.setLayout(s.basicGridLayout,{axes:this.staticAxisCount,isNewSet:0==h?!0:!1})}},r.prototype.resetAllItemConstraints=function(){for(var t=this.boxCount,i=0;t>i;i++){var s=this.boxes[i],e=this.getConstrainedItemDims(s);s.setDimensions(e[this.si],e[this.si_])}},r.prototype.getConstrainedItemDims=function(t){var i=this.itemConstraint,s=i/t.model[this.saDim_],e=t.model[this.saDim]*s,n=[e,i];return n},r.prototype.setLayout=function(t,i){var s=this.lastLayoutOptions&&this.lastLayoutOptions.options||{};if((t||this.lastLayoutOptions&&this.lastLayoutOptions.layout)&&(i||this.lastLayoutOptions&&this.lastLayoutOptions.options)){t||(t=this.lastLayoutOptions.layout),$.extend(s,i),this.lastLayoutOptions={layout:t,options:s},this.layout_cache&&delete this.layout_cache,this.hasShortGridDimsSi=!1,this.hasMediumGridDimsSi=!1,this.boxAxisLengths=[0,0];for(var e,n=this.boxCount,r=0;n>r;r++)e=this.getBoxFromIndex(r),e.index=r,t.call(this,e,s),this.boxAxisLengths[0]=Math.max(this.boxAxisLengths[0],e.tailPointPos[0]),this.boxAxisLengths[1]=Math.max(this.boxAxisLengths[1],e.tailPointPos[1]);if(!e){this.hasData=!1;var a="Tremula: Warning. No data found on layout operation.";return console&&console.error&&console.info(a),a}this.hasData=!0,this.contentDims[this.si]=this.boxAxisLengths[this.si],this.contentDims[this.si_]=this.boxAxisLengths[this.si_],this.scrollMargin=[this.si_*this.scrollMarginDefault,this.si*this.scrollMarginDefault],this.firstItemPos=-this.scrollMargin[this.si],this.bounceMargin=this.firstItemPos+this.bounceMarginDefault;var o=-2*parseInt(this.scrollMargin[this.si]),h=this.gridDims[this.si]+o;this.gridDims[this.si]>this.contentDims[this.si]?this.hasShortGridDimsSi=!0:this.contentDims[this.si]<h&&(this.hasMediumGridDimsSi=!0),this.hasShortGridDimsSi&&(this.boxAxisLengths[this.si]=h);var l=this.steppedScrolling?2*this.scrollAxisOffset:this.scrollAxisOffset;this.trailingEdgeScrollPos=-l+Math.min(this.getTrailingEdgeScrollPos()+(this.contentDims[this.si]-this.gridDims[this.si]),this.getTrailingEdgeScrollPos()),this.absTrailingEdgeScrollPos=this.firstItemPos-this.trailingEdgeScrollPos,this.hasMediumGridDimsSi&&(this.boxAxisLengths[this.si]=h),this.currentGridContentDims[this.si]=this.boxAxisLengths[this.si],this.currentGridContentDims[this.si_]=(this.staticAxisCount+1)*(this.itemConstraint+2*this.itemMargins[this.si_]),s.isNewSet&&(this.setAbsScrollPos(1),this.lastLayoutOptions.options.isNewSet=!1),this.oneShotPaint(1)}},r.prototype.doTransition=function(t,i,s,e,n){i=i?i:{},isNaN(s)&&(s=0),this.layoutXansEasing=e||easeOutElastic,this.layoutXansMs=s,this.layoutIsXing=s>0?!0:!1;var r=this;this.ltTimer=setTimeout(function(){r.layoutIsXing=!1,r.ltTimer=null},s+100),n&&this.setSurfaceMap(n),this.updateConfig(i),this.setLayout(t,i),this.oneShotPaint(1)},r.prototype.getTrailingEdgeScrollPos=function(){return-this.boxAxisLengths[this.si]+this.firstItemPos+this.gridDims[this.si]},r.prototype.assignBoxObjects=function(){function t(t){return t[this.sa]>=c[a]&&t[this.sa]<=this.boxAxisLengths[a]+c[a]?!0:!1}function i(t){return l[a]>=-(c[0]+t.width+2*this.itemMargins[a])&&l[a]<=this.gridDims[a]-c[a]?!0:!1}function s(t){return t>=0?t:Math.abs(this.boxAxisLengths[a]+t)}for(var e=!1,n=this,r=this.getScrollFrame(),a=this.si,o=this.si_,h=[0,0],l=[0,0],c=this.scrollMargin,u=0;u<this.boxCount;u++){var g=this.boxes[u];h[a]=g.headPointPos[a]+r,h[o]=g.headPointPos[o],g.setAbsPos(this.axisOffset[0]+h[0],this.axisOffset[1]+h[1]),l[0]=this.sx?g.x%this.boxAxisLengths[0]:g.x,l[1]=this.sx?g.y:g.y%this.boxAxisLengths[1],l[a]=s.call(this,l[a]);var m=l[a]+c[a]+.5*g.dims[a]+this.itemMargins[a],p=m/this.gridDims[a],d=1-p,f=2*(.5>p?p:d);i.call(this,g)&&(this.isLooping||t.call(this,g))?(g.doOnScreen(!0),g.setWaveforms({tailRamp:p,headRamp:d,triangle:f}),g.paintToSurfaceMap(l[0]+c[0],l[1]+c[1])):(g.doOnScreen(!1),g.setWaveforms({tailRamp:!1,headRamp:!1,triangle:!1})),g.isEasing&&(e=!0)}this.isChildEasing=e?!0:!1,null!==this.physicsLoopRAF&&(this.physicsLoopRAF=requestAnimationFrame(function(){n.assignBoxObjects()}))};var a=!1,o=new Date,h=(new Date,0),l=0,c=0;return r.prototype.handleGesture=function(t){switch(t.type){case"mousewheel":case"DOMMouseScroll":case"wheel":e.call(this,t);case"_mw":var i=t,s=.5*i.wheelDeltaY||-i.deltaY||3*-i.detail,r=.5*i.wheelDeltaX||-i.deltaX||3*-i.detail,a=this.scrollPos+this.sx?r:s,o=this.trailingEdgeScrollPos,u=!this.hasMediumGridDimsSi&&a>this.firstItemPos,g=!this.hasMediumGridDimsSi&&o>a;!this.isLooping&&(u||g)&&(this.sx?r=Math.min(.1*r,100):s=Math.min(.1*s,100)),t.gesture=t.gesture||{},t.gesture.deltaX=r,t.gesture.deltaY=s,t.gesture.center=t.gesture.center||{},t.gesture.center.pageX=t.pageX,t.gesture.center.pageY=t.pageY;case"dragup":case"dragdown":case"dragright":case"dragleft":"mouse"==t.pointerType?(t.gesture.preventDefault(),t.gesture.stopPropagation()):this.sx?!/DOMMouseScroll/.test(t.type)&&Math.abs(t.gesture.deltaY/t.gesture.deltaX)<=1&&n(t):!/DOMMouseScroll/.test(t.type)&&Math.abs(t.gesture.deltaX/t.gesture.deltaY)<=1&&n(t),this.isTouching=!0,this.getLastSelected()||this.setLastSelected(this.getClosestScrollOriginObj()),(0==h||/wheel|scroll/.test(t.type))&&(h=this.scrollPos,c=0);var m=this.sx?t.gesture.deltaX:t.gesture.deltaY,p=this.sx?t.gesture.deltaY:t.gesture.deltaX;Math.abs(m)>Math.abs(p)&&(this.setScrollPos(m-c,!0),c=m,this.oneShotPaint(t)),this.tagLastUserEvent(t);break;case"swipeleft":if(!this.sx)return;t.gesture.stopDetect(),this.isTouching=!1;var d=-t.gesture.velocityX;this.steppedScrolling?this.easeToNextStepItem(this.getLastSelected()):this.startEasing(d,t),this.tagLastUserEvent(t),this.setLastSelected();break;case"swiperight":if(!this.sx)return;t.gesture.stopDetect(),this.isTouching=!1;var d=t.gesture.velocityX;this.steppedScrolling?this.easeToPrevStepItem(this.getLastSelected()):this.startEasing(d,t),this.tagLastUserEvent(t),this.setLastSelected();break;case"swipeup":if(this.sx)return;t.gesture.stopDetect(),this.isTouching=!1;var d=-t.gesture.velocityY;this.steppedScrolling?this.easeToNextStepItem(this.getLastSelected()):this.startEasing(d,t),this.tagLastUserEvent(t),this.setLastSelected();break;case"swipedown":if(this.sx)return;t.gesture.stopDetect(),this.isTouching=!1;var d=t.gesture.velocityY;this.steppedScrolling?this.easeToPrevStepItem(this.getLastSelected()):this.startEasing(d,t),this.tagLastUserEvent(t),this.setLastSelected();break;case"touch":h=0,l=0,this.isTouching=!0,this.oneShotPaint(t),this.tagLastUserEvent(t);break;case"release":var f=new Date-this.lastUserEvent.time,y=/touch/.test(this.lastUserEvent.evt.type,"i");if(!this.isEasing&&y&&1e3>f&&this.$e.trigger("tremulaItemSelect",t),this.isTouching=!1,this.steppedScrolling){var x=y&&t.target&&t.target.className&&!/\bgridBox\b/.test(t.target.className);(!y||x)&&this.easeToClosestStepItem()}else this.oneShotPaint();this.tagLastUserEvent(t),this.setLastSelected()}},r}),t.config({baseUrl:"src"}),s("Tremula",["Layouts","Easings","DataAdapters","Projections","Grid"],function(t,i,s,e,n){function r(t){var i=$(t);i.hasClass("loaded")||(i.addClass("loaded"),setTimeout(function(){i.parents(".gridBox").addClass("loaded")},1500))}var a=function(){this.Grid={},this.dataAdapters=s,this.layouts=t,this.easings=i,this.projections=e,this.cache={},this.updateConfig=function(){console&&console.error&&console.error("Tremula is not initalized. Request ignored.")},this.toggleScrollAxis=function(){console&&console.error&&console.error("Tremula is not initalized. Request ignored.")}};return a.prototype.resize=function(){0!=this.$e[0].offsetWidth&&(this.Grid.setScrollAxis(),this.Grid.setLayout(),this.Grid.oneShotPaint())},a.prototype.appendData=function(t,i){this.Grid.initBoxes(t,i,!0),this.cache.endOfScrollFlag=!1},a.prototype.insertData=function(t,i){this.Grid.initBoxes(t,i,"insert"),this.cache.endOfScrollFlag=!1},a.prototype.refreshData=function(t,i){this.Grid.initBoxes(t,i,!1),this.cache.endOfScrollFlag=!1},a.prototype.tailScroll=function(){var t=this.Grid;t.setLastTouchOrigin(t.gridDims[t.si]/2),t.easeTo(t.getScrollPos()-.5*t.getScrollViewDim(),800)},a.prototype.headScroll=function(){var t=this.Grid;t.setLastTouchOrigin(t.gridDims[t.si]/2),t.easeTo(t.getScrollPos()+.5*t.getScrollViewDim(),800)},a.prototype.setOnChangePub=function(t){this.Grid.onChangePub=t},a.prototype.init=function(t,r,a){var o=this;this.parent=a||null,t&&(this.$e=t||null);var h={onChangePub:null,adapter:s.TremulaItem,isLooping:!1,ignoreUserEvents:!1,surfaceMap:e.streamHorizontal,itemPreloading:!1,itemEasing:!1,itemEasingParams:{touchCurve:i.easeOutCubic,swipeCurve:i.easeOutCubic,transitionCurve:i.easeOutCubic,easeTime:500,springLimit:20},scrollAxis:"x",itemConstraint:null,staticAxisCount:0},l=$.extend({},h,r||{});if(this.Grid=new n(t,l,this),this.updateConfig=this.Grid.updateConfig,this.toggleScrollAxis=this.Grid.toggleScrollAxis,r&&r.data&&this.Grid.initBoxes(r.data,r.adapter),$(window).on("resize",function(t){o.resize(t)}),!l.ignoreUserEvents){var c=new Hammer(t[0],{prevent_default:!1});c.on("dragdown dragup dragleft dragright swipeleft swipeup swipedown swiperight touch release tap",function(t){o.Grid.handleGesture(t)}),c.on("mousewheel wheel DOMMouseScroll",function(t){o.Grid.handleGesture(t)});var u,g,m={time:null,evt:null};this.$e.bind("touchmove",function(t){o.Grid.sx?m.time?(u=t.originalEvent.pageX-m.evt.pageX,g=t.originalEvent.pageY-m.evt.pageY,0!=u&&Math.abs(g/u)<=1&&t.preventDefault()):t.preventDefault():m.time?(u=t.originalEvent.pageX-m.evt.pageX,g=t.originalEvent.pageY-m.evt.pageY,0!=g&&Math.abs(u/g)<=1&&t.preventDefault()):t.preventDefault(),m={time:new Date,evt:t.originalEvent}})}},window.imageLoaded||(window.imageLoaded=r),window.Tremula=a,a}),i(["Tremula"])}();